<!doctype html>

<canvas id="gameCanvas" width="800" height="600"></canvas>

<script>

/*The canvas element is the actual DOM node that's embedded in the HTML page.  The 
canvas context is an object with properties and methods that you can use to render 
graphics inside the canvas element.  The context can be 2d or webgl (3d).*/

var canvas;
var canvasContext;
var ballX = 50;
var ballY = 50;
var ballSpeedX = 10;
var ballSpeedY = 4;

var paddle1Y = 250;
const PADDLE_HEIGHT = 100; // paddle height must be a constant.

function calculateMousePos(evt) {
	var rect = canvas.getBoundingClientRect();
	var root = document.documentElement;
	var mouseX = evt.clientX - rect.left - root.scrollLeft;
	var mouseY = evt.clientY - rect.top - root.scrollTop;
	return{ 		//Technically this is one return value,it's just a javascript "Object Literal" 
			x:mouseX,
			y:mouseY
	};
}
	
	// onload function will run only if the page is fully loaded.
	window.onload = function(){ 
		console.log("No error");
		
		canvas = document.getElementById('gameCanvas')
		canvasContext = canvas.getContext('2d');
		
		var framesPerSecond = 30; // frame rate 
		//callBoth function inline in below line to make it fast and easy.
		setInterval(function (){
						drawEverything();
						moveEverything();
					},1000/framesPerSecond); //To reduce the speed of comp speed so that changes can be seen
 		canvas.addEventListener('mousemove',
 				function(evt){
 						var mousePos = calculateMousePos(evt);
 						paddle1Y = mousePos.y - (PADDLE_HEIGHT/2); //sub half paddle height to center the mouse pointer
 				});
}

function ballReset(){
	ballSpeedX = -ballSpeedX;
	ballX = canvas.width/2;
	ballY = canvas.height/2;
}

function moveEverything(){
	 ballX = ballX + ballSpeedX; //variable to alter the position of the canvas object.
    // ballSpeedX = ballSpeedX +1; just increasing speed every frame.
     ballY = ballY + ballSpeedY; //variable to alter the position of the canvas object.
     // ballSpeedX = ballSpeedX +1; just increasing speed every frame.
  	if(ballX  > canvas.width){  //Do not try to hardcode canvas width as we may increase it later on.
  		ballSpeedX = -ballSpeedX;//Note instead of hardcoding the speed we are using the ballspeedX negative so return speed is also same.
  	}
  	//Left Paddle Programming reflection
  	if(ballX < 0){
  		//ballSpeedX = -ballSpeedX; 
  		if(ballY > paddle1Y && ballY < paddle1Y + PADDLE_HEIGHT ){
  			ballSpeedX = -ballSpeedX;
  		}
  		else{
  			ballReset();
  	  }
}
  	if(ballY  > canvas.height){  //Do not try to hardcode canvas width as we may increase it later on.
  		ballSpeedY = -ballSpeedY;//Note instead of hardcoding the speed we are using the ballspeedX negative so return speed is also same.
  	}

  	if(ballY < 0){
  		ballSpeedY = -ballSpeedY; 
  	  }
}

function drawEverything(){

		console.log(ballX)
		//canvasContext.fillStyle = 'black';
		//canvasContext.fillRect(0,0,canvas.width,canvas.height);
		//canvasContext.fillStyle = 'white';
		//canvasContext.fillRect(0,200,10,100);
		//canvasContext.fillStyle = 'red';
		//canvasContext.fillRect(ballX,200,10,10);
		//canvasContext.fillStyle = 'orange';
		//canvasContext.fillRect(200,300,ballX,25);
		// Create a generic function for reducing two lines in one.

		//Black Canvas Field For Game
		colorRect(0,0,canvas.width,canvas.height,'black');
		
		//left player paddle
		colorRect(0,paddle1Y,10,PADDLE_HEIGHT,'white'); //paddle1y to change y axis position

		//This is used to create a ball
		//colorRect(ballX,200,10,10,'red');
		// Making Ball Circle .
		colorCircle(ballX,ballY, 10, 'white');
}

//helper function to draw a circle
function colorCircle(centerX, centerY, radius, drawColor){
		canvasContext.fillStyle = drawColor;
		canvasContext.beginPath();
		canvasContext.arc(centerX, centerY, radius, 0, Math.PI*2, true); //5th argument is in rad pi rad =180' so full circle is 2 pi and 6th tells the rotation clock or anti
		canvasContext.fill();
}

//#Change3
function colorRect(leftX,topY,width,height,drawColor){
		canvasContext.fillStyle = drawColor;
		canvasContext.fillRect(leftX,topY,width,height);
}		
</script>

</html> 